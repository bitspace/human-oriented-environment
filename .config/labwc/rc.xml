<?xml version="1.0" encoding="UTF-8"?>
<labwc_config>
  <focus>
    <focusNew>true</focusNew>
    <followMouse>false</followMouse>
    <raiseOnFocus>true</raiseOnFocus>
    <focusLastOnDesktop>true</focusLastOnDesktop>
  </focus>

  <desktops>
    <number>1</number>
    <firstdesk>1</firstdesk>
    <names>
      <name>1:Main</name>
    </names>
  </desktops>

  <theme>
    <name>Adwaita-dark</name>
    <titleLayout>NLIMC</titleLayout>
    <titlebar>
      <height>28</height>
      <font>Noto Sans 11</font>
    </titlebar>
  </theme>

  <placement>
    <policy>Smart</policy>
    <center>yes</center>
    <monitor>Primary</monitor>
  </placement>

  <keyboard>
    <!-- Core window management -->
    <keybind key="W-Q">
      <action name="Close"/>
    </keybind>

    <keybind key="W-Return">
      <action name="Execute">
        <command>kitty</command>
      </action>
    </keybind>

    <keybind key="W-E">
      <action name="Execute">
        <command>thunar</command>
      </action>
    </keybind>

    <keybind key="W-R">
      <action name="Execute">
        <command>rofi -show drun</command>
      </action>
    </keybind>

    <keybind key="W-V">
      <action name="ToggleDecorations"/>
    </keybind>

    <keybind key="W-F">
      <action name="ToggleFullscreen"/>
    </keybind>

    <keybind key="W-L">
      <action name="Execute">
        <command>gtklock</command>
      </action>
    </keybind>

    <keybind key="W-S-E">
      <action name="Exit" />
    </keybind>

    <!-- Desktop navigation (single desktop preserved for compatibility) -->
    <keybind key="W-1">
      <action name="GoToDesktop">
        <to>1</to>
      </action>
    </keybind>

    <!-- Classic task switching -->
    <keybind key="A-Tab">
      <action name="NextWindow" />
    </keybind>
    <keybind key="A-S-Tab">
      <action name="PreviousWindow" />
    </keybind>

    <!-- Screen capture -->
    <keybind key="Print">
      <action name="Execute">
        <command>grim -g "$(slurp)" ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png</command>
      </action>
    </keybind>
    <keybind key="Shift-Print">
      <action name="Execute">
        <command>grim ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png</command>
      </action>
    </keybind>

    <!-- Media keys -->
    <keybind key="XF86AudioMute">
      <action name="Execute">
        <command>pactl set-sink-mute @DEFAULT_SINK@ toggle</command>
      </action>
    </keybind>
    <keybind key="XF86AudioLowerVolume">
      <action name="Execute">
        <command>pactl set-sink-volume @DEFAULT_SINK@ -5%</command>
      </action>
    </keybind>
    <keybind key="XF86AudioRaiseVolume">
      <action name="Execute">
        <command>pactl set-sink-volume @DEFAULT_SINK@ +5%</command>
      </action>
    </keybind>
    <keybind key="XF86AudioMicMute">
      <action name="Execute">
        <command>pactl set-source-mute @DEFAULT_SOURCE@ toggle</command>
      </action>
    </keybind>
    <keybind key="XF86MonBrightnessDown">
      <action name="Execute">
        <command>brightnessctl set 5%-</command>
      </action>
    </keybind>
    <keybind key="XF86MonBrightnessUp">
      <action name="Execute">
        <command>brightnessctl set 5%+</command>
      </action>
    </keybind>
  </keyboard>

  <mouse>
    <dragThreshold>4</dragThreshold>
    <doubleClickTime>200</doubleClickTime>
    <sloppyFocus>false</sloppyFocus>
  </mouse>

  <libinput>
    <device category="default">
      <naturalScroll>yes</naturalScroll>
    </device>
    <device category="non-touch">
      <naturalScroll>yes</naturalScroll>
    </device>
    <device category="touchpad">
      <naturalScroll>yes</naturalScroll>
    </device>
  </libinput>

  <window_rules>
    <rule window="notification">
      <action name="Decorations">
        <state>false</state>
      </action>
      <action name="SkipTaskbar">
        <state>true</state>
      </action>
      <action name="Focus">
        <state>false</state>
      </action>
    </rule>
  </window_rules>
</labwc_config>
